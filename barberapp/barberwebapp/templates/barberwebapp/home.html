{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mt-5">
  <h1 class="mb-4">Rezervirajte termin za šišanje</h1>
  <div class="row">
    <!-- Prikaz dostupnih frizera -->
    <div class="col-md-6">
      <h2>Naši frizeri</h2>
      <ul class="list-group">
        {% for barber in barbers %}
          <li class="list-group-item">
            <h5>{{ barber.name }}</h5>
            <p>{{ barber.bio }}</p>
            <p>Rating: {{barber.rating}}</p>
          </li>
        {% empty %}
          <li class="list-group-item">Trenutno nema dostupnih frizera.</li>
        {% endfor %}
      </ul>
    </div>
    <!-- Forma za rezervaciju termina -->
    <div class="col-md-6">
      <h2>Rezervacija termina</h2>
      <form method="POST" action="{% url 'barberwebapp:create_appointment' %}">
        {% csrf_token %}
        <div class="mb-3">
          <label for="barber" class="form-label">Izaberite frizera</label>
          <select id="barber" name="barber" class="form-select" required>
            <option value="">-- Odaberite frizera --</option>
            {% for barber in barbers %}
              <option value="{{ barber.id }}">{{ barber.name }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="mb-3">
          <label for="date" class="form-label">Datum</label>
          <input type="date" id="date" name="date" class="form-control" required>
        </div>
        <div class="mb-3">
          <label for="time" class="form-label">Vrijeme</label>
          <input type="time" id="time" name="time" class="form-control" required>
        </div>
        <button type="submit" class="btn btn-primary">Rezerviraj termin</button>
        {% if form.errors %}
  <div class="alert alert-danger mt-3">
    <ul>
      {% for field in form %}
        {% for error in field.errors %}
          <li>{{ field.label }}: {{ error }}</li>
        {% endfor %}
      {% endfor %}
      {% for error in form.non_field_errors %}
        <li>{{ error }}</li>
      {% endfor %}
    </ul>
  </div>
{% endif %}
      </form>
    </div>
  </div>
</div>
{% endblock %}
